<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- LinkCss -->
    <link rel="icon" href="img/icon/icon.png" type="image/x-icon">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.2.0/css/all.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.2.0/css/sharp-solid.css">
    <link rel="stylesheet" href="css/web.css">
    <!-- LinkJs -->
    <script src="js/jquery-3.6.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/sweetalert2.all.min.js"></script>
    <script src="js/web.js"></script>
    <title>WOWMusic</title>
</head>
<body class="bg-black">
    <!-- Navbar Sm -->
    <nav class="nav-bar d-flex d-xl-none">
      <a class="nav-brand-sm d-none d-sm-flex" href=""><img class="nav-img-brand-sm" src="img/icon/icon.png" alt="WOWMusic"><span class="font-brand-sm"> WOWMusic</span></a>
      <a class="nav-brand-sm d-flex d-md-none" href=""><img class="nav-img-brand-xs" src="img/icon/icon.png" alt="WOWMusic"><span class="font-brand-sm"></span></a>
      <ul class="nav-container">
          <li class="nav-item"></li>
          <li class="nav-item">
              <a class="nav-link" href="index.html"><i class="fa-sharp fa-solid fa-house"></i></a>
              <a class="nav-link" href="library.html"><i class="fa-sharp fa-solid fa-books"></i></a>
              <a class="nav-link" href="likesong.html"><i class="fa-sharp fa-solid fa-thumbs-up"></i></a>
          </li>
          <li class="nav-item">
            <div class="dropdown account">
              <a class="btn-account dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa-solid fa-user"></i>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#info" href="">จัดทำโดย</a></li>
                <li><a class="dropdown-item" href="info.html">อ้างอิงจาก</a></li>
              </ul>
            </div>
          </li>
      </ul>
    </nav>
    <!-- Navbar Lg -->
    <nav class="nav-bar d-none d-xl-flex">
        <a class="nav-brand" href=""><img class="nav-img-brand" src="img/icon/icon.png" alt="WOWMusic"><span class="font-brand"> WOWMusic</span></a>
        <ul class="nav-container">
            <li class="nav-item"></li>
            <li class="nav-item">
                <a class="nav-link" href="index.html"><i class="fa-sharp fa-solid fa-house"></i> Home</a>
                <a class="nav-link" href="library.html"><i class="fa-sharp fa-solid fa-books"></i> Library</a>
                <a class="nav-link" href="searchsong.html"><i class="fa-solid fa-magnifying-glass"></i> Music Category</a>
            </li>
            <li class="nav-item">
              <div class="dropdown account">
                <a class="btn-account dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fa-solid fa-user"></i> ข้อมูลผู้จัดทำ
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#info" href="">จัดทำโดย</a></li>
                  <li><a class="dropdown-item" href="info.html">อ้างอิงจาก</a></li>
                </ul>
              </div>
            </li>
        </ul>
    </nav>
    <!-- Modal -->
    <div class="modal fade" id="info" tabindex="-1" aria-labelledby="infoLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-center" id="infoLabel">จัดทำโดย</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <span class="text-muted ms-5 me-5">65502100005-5 นายณัฐวุฒิ พูลเขตต์</span>
            <a class="text-muted fs-4" target="_blank" href="https://github.com/SilSea"><i class="fa-brands fa-github"></i></a>
            <a class="text-muted fs-4" target="_blank" href="https://www.instagram.com/silsea_nut/"><i class="fa-brands fa-instagram"></i></a>
            <a class="text-muted fs-4" target="_blank" href="https://web.facebook.com/NattawutPoolkhet"><i class="fa-brands fa-facebook"></i></a>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Content -->
    <div id="content" class="content">
        <div class="head-content">มิวสิกวิดีโอแนะนำ</div>
        <!-- List -->
        <div class="row-content">
            <div class="col-content"></div>
            <div class="col-contentcenter">
                <a class="card-content" onclick="selectmusic('m87');">
                    <img class="card-img-content" src="img/music/m87.jpg">
                </a>
                <a class="card-content" onclick="selectmusic('ireallywanttostayatyourhouse');">
                    <img class="card-img-content" src="img/music/ireallywanttostayatyourhouse.jpg">
                </a>
                <a class="card-content" onclick="selectmusic('GeorgeKarizakisNoRiderSystem');">
                    <img class="card-img-content" src="img/music/GeorgeKarizakisNoRiderSystem.jpg">
                </a>
                <a class="card-content" onclick="selectmusic('volcano');">
                    <img class="card-img-content" src="img/music/volcano.jpg">
                </a>
                <a class="card-content" onclick="selectmusic('TRUSTLAST');">
                    <img class="card-img-content" src="img/music/TRUSTLAST.jpg">
                </a>
            </div>
            <div class="col-content"></div>
        </div>
        <div class="row-content">
          <div class="col-content"></div>
          <div class="col-contentcenter">
              <a class="card-content" onclick="selectmusic('Cherryish');">
                  <img class="card-img-content" src="img/music/Cherryish.jpg">
              </a>
              <a class="card-content" onclick="selectmusic('TsumitoBatsutoAngura');">
                  <img class="card-img-content" src="img/music/TsumitoBatsutoAngura.jpg">
              </a>
              <a class="card-content" onclick="selectmusic('Kaibutsu');">
                  <img class="card-img-content" src="img/music/Kaibutsu.jpg">
              </a>
              <a class="card-content" onclick="selectmusic('GenesisofAquarion');">
                  <img class="card-img-content" src="img/music/GenesisofAquarion.jpg">
              </a>
              <a class="card-content" onclick="selectmusic('OneLastKiss');">
                  <img class="card-img-content" src="img/music/OneLastKiss.jpg">
              </a>
          </div>
          <div class="col-content"></div>
      </div>
    </div>
    <!-- ShowVideo -->
    <div id="videocontent" class="video-content-hide">
        <div style="text-align: center;width: 100%;height: 100%;padding-top: 5%;">
          <iframe id="video" width="1000" height="600" src-="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>
    <!-- Player -->
    <div class="player-container">
        <audio id="music" src="" ontimeupdate="updateTrackTime(this);"></audio>
        <!-- MusicInfo -->
        <div class="player-colleft">
            <img id="img-player-music-sm" class="img-player-music-sm d-flex d-lg-none" src=""></i>
            <img id="img-player-music" class="img-player-music d-none d-lg-flex " src=""></i>
            <div id="musicname" class="music-name"></div>
        </div>
        <div class="player-col">
            <div class="player-control">
                <div class="player-row">
                  <!-- Random -->
                  <i id="random-icon" class="fa-solid fa-shuffle pad" onclick="randommusic();"></i>
                  <!-- Back -->
                  <!-- <i id="back-icon" class="fa-solid fa-backward-step pad" onclick="back();"></i> -->
                  <!-- Play -->
                  <i id="playpause-icon" class="fa-sharp fa-soild fa-circle-play pad p-active p-size" onclick="playaudio();"></i>
                  <!-- Forward -->
                  <!-- <i id="forward-icon" class="fa-solid fa-forward-step pad" onclick="forward();"></i> -->
                  <!-- Loop -->
                  <i id="repeat-icon" class="fa-sharp fa-solid fa-repeat pad" onclick="loop();"></i>
                </div>
                <div class="player-row">
                    <span id="currentTime" class="time">00:00</span>
                    <input id="current-time" class="player-slide" type="range" max="100" value="0" oninput="slide(this);">
                    <span id="duration" class="time"></span>
                </div>
            </div>
        </div>
        <div class="player-colright">
            <div class="player-rowv">
                <!-- Volume -->
                <i id="volumemute-icon" class="fa-solid fa-volume pad-v" onclick="mute();"></i>
                <input id="volume" class="volume" type="range" max="100" value="5" width="100%" oninput="volume();">
                <i id="videobutton" class="fa-sharp fa-solid fa-circle-caret-up pad-v" onclick="showhidevideo();"></i>
            </div>
        </div>
    </div>
    <script>
      // DefaultVolume
      var defaultvolume = 50;
      // DefaultDurationMusic
      document.getElementById('duration').innerHTML = "00:00";
      // ReadyLoad
      $(document).ready(function() {
        // LoadDurationMusic
        var audio = $("#music")[0];
        $("#music").on("loadedmetadata", function() {
            var duration = Math.floor(audio.duration);
            if(duration != ""){
                document.getElementById("duration").innerHTML = formatSecondsAsTime(duration);
            }
        });
        
        // LoadImgDefault
        var img = document.getElementById('img-player-music');
        var img2 = document.getElementById('img-player-music-sm');
        img2.src = "img/icon/icon.png";
        img.src = "img/icon/icon.png";

      });
      // ShowHideVideo
      function showhidevideo(){
          var videocontent = document.getElementById("videocontent");
          var button = document.getElementById("videobutton");
          if(button.className == "fa-sharp fa-solid fa-circle-caret-up pad-v"){
            button.className = "fa-sharp fa-solid fa-circle-caret-down pad-v";
            videocontent.className = "video-content-show";
          }else if(button.className == "fa-sharp fa-solid fa-circle-caret-down pad-v"){
            button.className = "fa-sharp fa-solid fa-circle-caret-up pad-v";
            videocontent.className = "video-content-hide";
          }
      }
      // RandomMusic
      function randommusic(){
          selectmusic(listmusicnum[Math.floor(Math.random() * 9)]);
      }
      // SelectMusic
      function selectmusic(namemusic){
        var changeaudio = document.getElementById('music');
        var playicon = document.getElementById('playpause-icon');
        var volume = document.getElementById('volume');
        var changeimg = document.getElementById('img-player-music');
        var changeimgsm = document.getElementById('img-player-music-sm');
        var musicname = document.getElementById('musicname');
        var video = document.getElementById("video");
        
        for(var name in listmusic){
            var id = listmusic[name];
            var vid = listvideo[name];
            if(namemusic == name){
                fetch("https://www.googleapis.com/drive/v3/files/" + id + "?alt=media&key=GOOGLE_DRIVE_KEY")
                .then(response => response.blob())
                .then(blob => ChangeBlob(blob))
                function ChangeBlob(blob){
                  const url = URL.createObjectURL(blob);
                  changeaudio.src = url;
                  changeaudio.play();
                }
                playicon.className = "fa-sharp fa-soild fa-circle-pause pad p-active p-size";
                changeimg.src = "img/music/" + namemusic + ".jpg";
                changeimgsm.src = "img/music/" + namemusic + ".jpg";
                musicname.innerHTML = listname[name]
                video.src = "https://www.youtube.com/embed/"+ vid +"?autoplay=1&mute=1&controls=0";
                volume.value = defaultvolume;
                changeaudio.volume = defaultvolume / 100;
            }
        }
        
      }
      // Playeaudio
      function playaudio(){
        // ChangeIcon
        var playicon = document.getElementById('playpause-icon');
        var audio = document.getElementById('music');

        // PlayAudio
        if(playicon.className == "fa-sharp fa-soild fa-circle-play pad p-active p-size"){
            audio.play();
            playicon.className = "fa-sharp fa-soild fa-circle-pause pad p-active p-size";
        }
        else if(playicon.className == "fa-sharp fa-soild fa-circle-pause pad p-active p-size"){
            audio.pause();
            playicon.className = "fa-sharp fa-soild fa-circle-play pad p-active p-size";
        }
        // Default Volume
        audio.volume = defaultvolume / 100;
      }
      // Volume
      function volume(){
        var audio = document.getElementById('music');
        var volume = document.getElementById('volume');
        
        audio.volume = volume.value / 100;
      }
      // Mute
      function mute(){
      var audio = document.getElementById('music');
      var volume = document.getElementById('volume');
      var volumeicon = document.getElementById('volumemute-icon');

      if(volumeicon.className == "fa-solid fa-volume pad-v"){
          audio.volume = 0;
          volume.value = 0;
          volumeicon.className = "fa-solid fa-volume-xmark pad-v";
      }else if(volumeicon.className == "fa-solid fa-volume-xmark pad-v"){
          volume.value = defaultvolume;
          audio.volume = volume.value / 100;
          volumeicon.className = "fa-solid fa-volume pad-v";
      }
      }
      // Loop
      function loop(){
        var audio = document.getElementById('music');
        var loopicon = document.getElementById('repeat-icon');
        
        if(loopicon.className == "fa-sharp fa-solid fa-repeat pad"){
            audio.loop = true;
            loopicon.className = "fa-sharp fa-solid fa-repeat-1 pad p-active";
        }else if(loopicon.className == "fa-sharp fa-solid fa-repeat-1 pad p-active"){
            audio.loop = false;
            loopicon.className = "fa-sharp fa-solid fa-repeat pad";
        }
      }
      // Slide
      function slide(){
        var audio = document.getElementById('music');
        var slide = document.getElementById('current-time');

        audio.currentTime = slide.value;
      }
      // Forward
      function forward(){
        var audio = document.getElementById('music');
        var forwardicon = document.getElementById('forward-icon');

      }
      // Back
      function back(){
        var audio = document.getElementById('music');
        var backicon = document.getElementById('back-icon');

      }
      // TrackTime
      function updateTrackTime(track){
      var currTimeDiv = document.getElementById('currentTime');
      var durationDiv = document.getElementById('duration');
      var audio = document.getElementById('music');

      // CurrentTimeAndDuration
      var currTime = Math.floor(track.currentTime); 
      var duration = Math.floor(track.duration);

      // PlaySlide
      currTimeDiv.innerHTML = formatSecondsAsTime(currTime);
      document.getElementById('current-time').max = duration;
      document.getElementById('current-time').value = currTime;

      // CheckLoopChangeIcon
      if(currTime == duration && audio.loop == false){
          var playicon = document.getElementById('playpause-icon');
          playicon.className = "fa-sharp fa-soild fa-circle-play pad p-active p-size";
          audio.pause();
          audio.currentTime = 0;
      }else if(currTime == 0 && audio.loop == true){
          var playicon = document.getElementById('playpause-icon');
          playicon.className = "fa-sharp fa-soild fa-circle-pause pad p-active p-size";
      }

      // CheckTime
      if (isNaN(duration)){
        durationDiv.innerHTML = '00:00';
      } 
      else{
        durationDiv.innerHTML = formatSecondsAsTime(duration);
      }
      }
      // FormatTime
      function formatSecondsAsTime(secs, format) {
        var hr  = Math.floor(secs / 3600);
        var min = Math.floor((secs - (hr * 3600))/60);
        var sec = Math.floor(secs - (hr * 3600) -  (min * 60));

        if (min < 10){ 
            min = "0" + min; 
        }
        if (sec < 10){ 
            sec  = "0" + sec;
        }

        return min + ':' + sec;
      }
    </script>
</body>
</html>